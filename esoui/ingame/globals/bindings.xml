<Bindings>
    <Layer name="SI_KEYBINDINGS_LAYER_GENERAL">
        <Category name="SI_KEYBINDINGS_CATEGORY_MOVEMENT">
            <Action name="MOVE_FORWARD">
                <Down>MoveForwardStart()</Down>
                <Up>MoveForwardStop()</Up>
            </Action>

            <Action name="MOVE_BACKWARD">
                <Down>MoveBackwardStart()</Down>
                <Up>MoveBackwardStop()</Up>
            </Action>

            <Action name="TOGGLE_WALK">
                <Down>ToggleWalk()</Down>
            </Action>

            <Action name="TURN_LEFT">
                <Down>TurnLeftStart()</Down>
                <Up>TurnLeftStop()</Up>
            </Action>

            <Action name="TURN_RIGHT">
                <Down>TurnRightStart()</Down>
                <Up>TurnRightStop()</Up>
            </Action>

            <Action name="MOVE_JUMPASCEND" holdAndChordInteraction="RUN_ANYWAY">
                <Down>JumpAscendStart()</Down>
                <Up>AscendStop()</Up>
            </Action>

            <Action name="AUTORUN">
                <Down>ToggleAutoRun()</Down>
            </Action>

            <Action name="ROLL_DODGE">
                <Down>RollDodgeStart()</Down>
                <Up>RollDodgeStop()</Up>
            </Action>

            <Action name="TOGGLE_MOUNT">
                <Down>ToggleMount()</Down>
            </Action>

            <Action name="GAMEPAD_JUMP_OR_INTERACT" hideAction="true" holdAndChordInteraction="RUN_ANYWAY">
                <Down>
                    ZO_SetJumpOrInteractDownAction(ZO_JUMP_OR_INTERACT_DID_NOTHING)
                    local interactPromptVisible = RETICLE:GetInteractPromptVisible()
                    local isInactiveClickableFixture = IsGameCameraClickableFixture() and not IsGameCameraClickableFixtureActive()
                    if not IsBlockActive() then  --don't allow Interactions or Jumps while blocking on Gamepad as it will trigger a roll anyway.
                        if interactPromptVisible and not isInactiveClickableFixture then
                            ZO_SetJumpOrInteractDownAction(ZO_JUMP_OR_INTERACT_DID_INTERACT)
                            if not INTERACTIVE_WHEEL_MANAGER:StartInteraction(ZO_INTERACTIVE_WHEEL_TYPE_FISHING) then GameCameraInteractStart() end
                        else
                            ZO_SetJumpOrInteractDownAction(ZO_JUMP_OR_INTERACT_DID_JUMP)
                            JumpAscendStart()
                        end
                    end
                </Down>
                <Up>
                    local downAction = ZO_GetJumpOrInteractDownAction()
                    if downAction == ZO_JUMP_OR_INTERACT_DID_INTERACT then
                        if not INTERACTIVE_WHEEL_MANAGER:HandleUpAction(ZO_INTERACTIVE_WHEEL_TYPE_FISHING) then GameCameraInteractStart() end
                    elseif downAction == ZO_JUMP_OR_INTERACT_DID_JUMP then
                        AscendStop()
                    end
                </Up>
            </Action>
        </Category>

        <Category name="SI_KEYBINDINGS_CATEGORY_COMBAT">
            <Action name="SPECIAL_MOVE_ATTACK" holdAndChordInteraction="RUN_ANYWAY">
                <Down>
                    PrepareAttack()
                </Down>
                <Up>PerformAttack()</Up>
            </Action>

            <Action name="SPECIAL_MOVE_BLOCK" holdAndChordInteraction="RUN_ANYWAY">
                <Down>StartBlock()</Down>
                <Up>StopBlock()</Up>
            </Action>

            <Action name="SPECIAL_MOVE_SPRINT">
                <Down>OnSpecialMoveKeyDown(SPECIAL_MOVE_INDEX_SPRINT)</Down>
                <Up>OnSpecialMoveKeyUp(SPECIAL_MOVE_INDEX_SPRINT)</Up>
            </Action>

            <Action name="SPECIAL_MOVE_CROUCH">
                <Down>OnSpecialMoveKeyPressed(SPECIAL_MOVE_INDEX_CROUCH)</Down>
            </Action>

            <Action name="SPECIAL_MOVE_INTERRUPT">
                <Down>PerformInterrupt()</Down>
            </Action>

            <Action name="USE_SYNERGY">
                <Down>if SYNERGY:IsVisible() then ActivateSynergy() end</Down>
            </Action>

            <Action name="SPECIAL_MOVE_WEAPON_SWAP">
                <Down>
                    if SKILLS_FRAGMENT and SKILLS_FRAGMENT:IsShowing() then
                        ACTION_BAR_ASSIGNMENT_MANAGER:CycleCurrentHotbar()
                    else
                        OnWeaponSwap()
                    end
                </Down>
            </Action>

            <Action name="SPECIAL_MOVE_WEAPON_SWAP_TO_SET_1">
                <Down>OnWeaponSwapToSet1()</Down>
            </Action>

            <Action name="SPECIAL_MOVE_WEAPON_SWAP_TO_SET_2">
                <Down>OnWeaponSwapToSet2()</Down>
            </Action>

            <Action name="ACTION_BUTTON_3">
                <Down>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDown(3)
                        ZO_ActionBar_OnActionButtonDown(3)
                    end
                </Down>
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotUp(3)
                    end
                    ZO_ActionBar_OnActionButtonUp(3)
                </Up>
            </Action>
            <Action name="ACTION_BUTTON_4">
                <Down>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDown(4)
                        ZO_ActionBar_OnActionButtonDown(4)
                    end
                </Down>
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotUp(4)
                    end
                    ZO_ActionBar_OnActionButtonUp(4)
                </Up>
            </Action>
            <Action name="ACTION_BUTTON_5">
                <Down>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDown(5)
                        ZO_ActionBar_OnActionButtonDown(5)
                    end
                </Down>
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotUp(5)
                    end
                    ZO_ActionBar_OnActionButtonUp(5)
                </Up>
            </Action>
            <Action name="ACTION_BUTTON_6">
                <Down>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDown(6)
                        ZO_ActionBar_OnActionButtonDown(6)
                    end
                </Down>
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotUp(6)
                    end
                    ZO_ActionBar_OnActionButtonUp(6)
                </Up>
            </Action>
            <Action name="ACTION_BUTTON_7">
                <Down>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDown(7)
                        ZO_ActionBar_OnActionButtonDown(7)
                    end
                </Down>
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotUp(7)
                    end
                    ZO_ActionBar_OnActionButtonUp(7)
                </Up>
            </Action>
            <Action name="ACTION_BUTTON_8">
                <Down>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDown(8)
                        ZO_ActionBar_OnActionButtonDown(8)
                    end
                </Down>
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotUp(8)
                    end
                    ZO_ActionBar_OnActionButtonUp(8)
                </Up>
            </Action>

            <!--These actions exist because they're on a Button that is also chorded for another action,
                therefore it can only have one handler, sprint is toggled with Gamepad, so this works -->
            <Action name="GAMEPAD_SPECIAL_MOVE_SPRINT" hideAction="true">
                <Down>OnSpecialMoveKeyDown(SPECIAL_MOVE_INDEX_SPRINT)</Down>
                <Up>OnSpecialMoveKeyUp(SPECIAL_MOVE_INDEX_SPRINT)</Up>
            </Action>

            <Action name="GAMEPAD_MOVE_JUMPASCEND" hideAction="true">
                <Down>JumpAscendStart()</Down>
                <Up>AscendStop()</Up>
            </Action>

            <Action name="GAMEPAD_ACTION_BUTTON_3" hideAction="true">
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDownAndUp(3)
                    end
                </Up>
            </Action>
            <Action name="GAMEPAD_ACTION_BUTTON_4" hideAction="true">
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDownAndUp(4)
                    end
                </Up>
            </Action>
            <Action name="GAMEPAD_ACTION_BUTTON_5" hideAction="true">
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDownAndUp(5)
                    end
                </Up>
            </Action>
            <Action name="GAMEPAD_ACTION_BUTTON_6" hideAction="true">
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDownAndUp(6)
                    end
                </Up>
            </Action>
            <Action name="GAMEPAD_ACTION_BUTTON_7" hideAction="true">
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDownAndUp(7)
                    end
                </Up>
            </Action>
            <Action name="GAMEPAD_ACTION_BUTTON_8" hideAction="true">
                <Up>
                    if ZO_ActionBar_CanUseActionSlots() then
                        OnSlotDownAndUp(8)
                    end
                </Up>
            </Action>
            <!-- This is the action for the quickslot wheel. The name isn't great, but changing it at this point would be too much of a pain, so we just kind of have to live with it -->
            <Action name="ACTION_BUTTON_9">
                <Down>INTERACTIVE_WHEEL_MANAGER:StartInteraction(ZO_INTERACTIVE_WHEEL_TYPE_UTILITY)</Down>
                <Up>
                    if not INTERACTIVE_WHEEL_MANAGER:HandleUpAction(ZO_INTERACTIVE_WHEEL_TYPE_UTILITY) then
                        if ZO_ActionBar_CanUseActionSlots() then
                            OnSlotUp(GetCurrentQuickslot(), HOTBAR_CATEGORY_QUICKSLOT_WHEEL)
                            ZO_ActionBar_OnActionButtonUp(GetCurrentQuickslot(), HOTBAR_CATEGORY_QUICKSLOT_WHEEL)
                        end
                    end
                </Up>
            </Action>

            <Action name="SHEATHE_WEAPON_TOGGLE">
                <Down>TogglePlayerWield()</Down>
            </Action>

            <Action name="COMMAND_PET">
                <Down>StartCommandPet()</Down>
                <Up>StopCommandPet()</Up>
            </Action>
        </Category>

        <Category name="SI_KEYBINDINGS_CATEGORY_TARGETING">
            <Action name="CYCLE_PREFERRED_ENEMY_TARGET">
                <Down>
                    INTERACTIVE_WHEEL_MANAGER:StartInteraction(ZO_INTERACTIVE_WHEEL_TYPE_TARGET_MARKER)
                </Down>
                <Up>
                    if not INTERACTIVE_WHEEL_MANAGER:HandleUpAction(ZO_INTERACTIVE_WHEEL_TYPE_TARGET_MARKER) then
                        if not HOUSING_EDITOR_SHARED:HandleCycleTarget() then
                            CycleGameCameraPreferredEnemyTarget()
                        end
                    end
                </Up>
            </Action>

            <Action name="GAMEPAD_CYCLE_PREFERRED_ENEMY_TARGET">
                <Down>
                    if not HOUSING_EDITOR_SHARED:HandleCycleTarget() then
                        CycleGameCameraPreferredEnemyTarget()
                    end
                </Down>
            </Action>
            
            <Action name="CLEAR_PREFERRED_ENEMY_TARGET">
                <Down>ClearGameCameraPreferredTarget()</Down>
            </Action>
            
            <Action name="GAMEPAD_TARGET_MARKER_INTERACT">
                <Down>INTERACTIVE_WHEEL_MANAGER:StartInteraction(ZO_INTERACTIVE_WHEEL_TYPE_TARGET_MARKER)</Down>
                <Up>INTERACTIVE_WHEEL_MANAGER:HandleUpAction(ZO_INTERACTIVE_WHEEL_TYPE_TARGET_MARKER)</Up>
            </Action>

            <!-- These binds are intentionally ordered this way so the order matches the layout of the wheel -->
            <Action name="ASSIGN_TARGET_MARKER_FOUR">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_FOUR)</Down>
            </Action>
            <Action name="ASSIGN_TARGET_MARKER_THREE">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_THREE)</Down>
            </Action>
            <Action name="ASSIGN_TARGET_MARKER_TWO">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_TWO)</Down>
            </Action>
            <Action name="ASSIGN_TARGET_MARKER_ONE">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_ONE)</Down>
            </Action>
            <Action name="ASSIGN_TARGET_MARKER_EIGHT">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_EIGHT)</Down>
            </Action>
            <Action name="ASSIGN_TARGET_MARKER_SEVEN">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_SEVEN)</Down>
            </Action>
            <Action name="ASSIGN_TARGET_MARKER_SIX">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_SIX)</Down>
            </Action>
            <Action name="ASSIGN_TARGET_MARKER_FIVE">
                <Down>AssignTargetMarkerToReticleTarget(TARGET_MARKER_TYPE_FIVE)</Down>
            </Action>
        </Category>

        <Category name="SI_KEYBINDINGS_CATEGORY_CAMERA">
            <Action name="CAMERA_ZOOM_OUT">
                <Down>CameraZoomOut()</Down>
            </Action>

            <Action name="CAMERA_ZOOM_IN">
                <Down>CameraZoomIn()</Down>
            </Action>

            <Action name="GAME_CAMERA_MOUSE_FREE_LOOK">
                <Down>GameCameraMouseFreeLookStart()</Down>
                <Up>GameCameraMouseFreeLookStop()</Up>
            </Action>

            <Action name="GAME_CAMERA_GAMEPAD_ZOOM">
                <Down>GameCameraGamepadZoomDown()</Down>
                <Up>GameCameraGamepadZoomUp()</Up>
            </Action>
        </Category>

        <Category name="SI_KEYBINDINGS_CATEGORY_INTERACTION">
            <Action name="GAME_CAMERA_INTERACT" holdAndChordInteraction="RUN_ANYWAY">
                <Down>if not INTERACTIVE_WHEEL_MANAGER:StartInteraction(ZO_INTERACTIVE_WHEEL_TYPE_FISHING) then GameCameraInteractStart() end</Down>
                <Up>if not INTERACTIVE_WHEEL_MANAGER:HandleUpAction(ZO_INTERACTIVE_WHEEL_TYPE_FISHING) then GameCameraInteractStart() end</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_INTERACT">
                <Down>PLAYER_TO_PLAYER:StartInteraction()</Down>
                <Up>PLAYER_TO_PLAYER:HandleUpAction()</Up>
            </Action>
        </Category>

        <Category name="SI_KEYBINDINGS_CATEGORY_USER_INTERFACE">
            <Action name="TOGGLE_FULLSCREEN">
                <Down>
                    ToggleFullScreen()
                    KEYBOARD_OPTIONS:UpdateAllPanelOptions(SAVE_CURRENT_VALUES)
                </Down>
            </Action>

            <Action name="TAKE_SCREENSHOT">
                <Up>TakeScreenshot()</Up>
            </Action>

            <Action name="START_CHAT_ENTER" preventAutomaticInputModeChange="true">
                <Down>StartChatInput("")</Down>
            </Action>

            <Action name="START_CHAT_SLASH" preventAutomaticInputModeChange="true">
                <Down>StartChatInput("/")</Down>
            </Action>

            <Action name="CHAT_REPLY_TO_LAST_WHISPER" preventAutomaticInputModeChange="true">
                <Down>ChatReplyToLastWhisper()</Down>
            </Action>

            <Action name="TOGGLE_SHOW_INGAME_GUI">
                <Down>ToggleShowIngameGui()</Down>
            </Action>

            <Action name="TOGGLE_GAME_CAMERA_UI_MODE">
                <Down>ZO_SceneManager_ToggleUIModeBinding()</Down>
            </Action>

            <Action name="TOGGLE_MARKET">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_MARKET)</Down>
            </Action>

            <Action name="TOGGLE_INVENTORY">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_INVENTORY)</Down>
            </Action>

            <Action name="TOGGLE_CHARACTER">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_CHARACTER)</Down>
            </Action>

            <Action name="TOGGLE_SKILLS">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_SKILLS)</Down>
            </Action>

            <Action name="TOGGLE_CHAMPION">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_CHAMPION)</Down>
            </Action>

            <Action name="TOGGLE_JOURNAL">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_JOURNAL)</Down>
            </Action>

            <Action name="TOGGLE_COLLECTIONS_BOOK">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_COLLECTIONS)</Down>
            </Action>

            <Action name="TOGGLE_MAP">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_MAP)</Down>
            </Action>

            <Action name="TOGGLE_GROUP">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_GROUP)</Down>
            </Action>

            <Action name="TOGGLE_CONTACTS">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_CONTACTS)</Down>
            </Action>

            <Action name="TOGGLE_GUILDS">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_GUILDS)</Down>
            </Action>

            <Action name="TOGGLE_ALLIANCE_WAR">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_ALLIANCE_WAR)</Down>
            </Action>

            <Action name="TOGGLE_MAIL">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_MAIL)</Down>
            </Action>

            <Action name="TOGGLE_NOTIFICATIONS">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_NOTIFICATIONS)</Down>
            </Action>

            <Action name="TOGGLE_ACTIVITY_FINDER">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_ACTIVITY_FINDER)</Down>
            </Action>

            <Action name="TOGGLE_CROWN_CRATES">
                <Down>SYSTEMS:GetObject("mainMenu"):ToggleCategory(MENU_CATEGORY_CROWN_CRATES)</Down>
            </Action>

            <Action name="TOGGLE_HELP">
                <Down> HELP_MANAGER:ToggleHelp() </Down>
            </Action>

            <Action name="TOGGLE_SYSTEM" rebindable="false" allowOnInputModeChange="true">
                <Down>ZO_SceneManager_ToggleGameMenuBinding()</Down>
            </Action>

            <Action name="ASSIST_NEXT_TRACKED_QUEST">
                <Down>FOCUSED_QUEST_TRACKER:AssistNext()</Down>
            </Action>

            <Action name="TOGGLE_ENDLESS_DUNGEON_BUFF_TRACKER">
                <Down>
                    if ENDLESS_DUNGEON_SUMMARY:IsShowing() then
                        SCENE_MANAGER:HideCurrentScene()
                    else
                        ZO_EndlessDungeonBuffTracker_Shared.ToggleVisibility()
                    end
                </Down>
            </Action>

            <Action name="TOGGLE_FIRST_PERSON">
                <Down>ToggleGameCameraFirstPerson()</Down>
            </Action>

            <Action name="TOGGLE_HUD_UI">
                <Down>SCENE_MANAGER:OnToggleHUDUIBinding()</Down>
            </Action>

            <Action name="TOGGLE_GAMEPAD_MODE" preventAutomaticInputModeChange="true">
                <Down>
                    local accessibilityModeEnabled = GetSetting_Bool(SETTING_TYPE_ACCESSIBILITY, ACCESSIBILITY_SETTING_ACCESSIBILITY_MODE)
                    if not accessibilityModeEnabled and IsGamepadUISupported() and IsKeyboardUISupported() then
                        local mode = IsInGamepadPreferredMode() and INPUT_PREFERRED_MODE_ALWAYS_KEYBOARD or INPUT_PREFERRED_MODE_ALWAYS_GAMEPAD
                        SetSetting(SETTING_TYPE_GAMEPAD, GAMEPAD_SETTING_INPUT_PREFERRED_MODE, mode)
                    end
                </Down>
            </Action>

            <Action name="TOGGLE_NAMEPLATES">
                <Down>
                    if GetSetting_Bool(SETTING_TYPE_NAMEPLATES, NAMEPLATE_TYPE_ALL_NAMEPLATES) then
                        SetSetting(SETTING_TYPE_NAMEPLATES, NAMEPLATE_TYPE_ALL_NAMEPLATES, "false")
                    else
                        SetSetting(SETTING_TYPE_NAMEPLATES, NAMEPLATE_TYPE_ALL_NAMEPLATES, "true")
                    end
                </Down>
            </Action>

            <Action name="TOGGLE_HEALTHBARS">
                <Down>
                    if GetSetting_Bool(SETTING_TYPE_NAMEPLATES, NAMEPLATE_TYPE_ALL_HEALTHBARS) then
                        SetSetting(SETTING_TYPE_NAMEPLATES, NAMEPLATE_TYPE_ALL_HEALTHBARS, "false")
                    else
                        SetSetting(SETTING_TYPE_NAMEPLATES, NAMEPLATE_TYPE_ALL_HEALTHBARS, "true")
                    end
                </Down>
            </Action>

            <Action name="CLEAR_ACTIVE_NARRATION">
                <Down>ClearActiveNarration()</Down>
            </Action>
        </Category>
    </Layer>
    <!-- This layer should not be player facing -->
    <Layer name="GamepadUIMode" allowFallthrough="false">
        <Category>
            <Action name="GAMEPAD_UI_EXIT" hideAction="true" rebindable="false">
                <Down>MAIN_MENU_GAMEPAD:AttemptShowBaseScene()</Down>
            </Action>
            <AllowAction name="START_CHAT_ENTER"/>
            <AllowAction name="START_CHAT_SLASH"/>
            <AllowAction name="TOGGLE_HUD_UI"/>
            <AllowAction name="TOGGLE_SYSTEM"/>

            <AllowAction name="TOGGLE_GAME_CAMERA_UI_MODE"/>
            <AllowAction name="TAKE_SCREENSHOT"/>
            <AllowAction name="TOGGLE_GAMEPAD_MODE"/>
            <AllowAction name="CLEAR_ACTIVE_NARRATION"/>
            <AllowAction name="TOGGLE_ENDLESS_DUNGEON_BUFF_TRACKER"/>

            <AllowAction name="TOGGLE_MARKET"/>
            <AllowAction name="TOGGLE_INVENTORY"/>
            <AllowAction name="TOGGLE_CHARACTER"/>
            <AllowAction name="TOGGLE_SKILLS"/>
            <AllowAction name="TOGGLE_CHAMPION"/>
            <AllowAction name="TOGGLE_JOURNAL"/>
            <AllowAction name="TOGGLE_COLLECTIONS_BOOK"/>
            <AllowAction name="TOGGLE_MAP"/>
            <AllowAction name="TOGGLE_GROUP"/>
            <AllowAction name="TOGGLE_CONTACTS"/>
            <AllowAction name="TOGGLE_GUILDS"/>
            <AllowAction name="TOGGLE_ALLIANCE_WAR"/>
            <AllowAction name="TOGGLE_MAIL"/>
            <AllowAction name="TOGGLE_NOTIFICATIONS"/>
            <AllowAction name="TOGGLE_ACTIVITY_FINDER"/>
            <AllowAction name="TOGGLE_HELP"/>
        </Category>
    </Layer>
    <Layer name="SI_KEYBINDINGS_LAYER_USER_INTERFACE_SHORTCUTS">
        <Category name="SI_KEYBINDINGS_CATEGORY_GENERAL">
            <Action name="UI_SHORTCUT_PRIMARY">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="UI_SHORTCUT_SECONDARY">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="UI_SHORTCUT_TERTIARY">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="UI_SHORTCUT_QUATERNARY">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="UI_SHORTCUT_QUINARY">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="UI_SHORTCUT_NEGATIVE">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_REPORT_PLAYER">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="UI_SHORTCUT_QUICK_SLOTS">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="UI_SHORTCUT_SHOW_QUEST_ON_MAP">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_EXIT" inheritsBindFrom="TOGGLE_GAME_CAMERA_UI_MODE" hideAction="true" allowOnInputModeChange="true">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
            </Action>
        </Category>
        
        <Category name="SI_KEYBINDINGS_CATEGORY_USER_INTERFACE_GAMEPAD">
            <Action name="UI_SHORTCUT_LEFT_STICK">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <!-- These binds don't do anything directly, but they allow the keys that
            emulate analog stick directional input to be rebound. -->

            <Action name="UI_SHORTCUT_LEFT_STICK_UP">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_LEFT_STICK_RIGHT">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_LEFT_STICK_DOWN">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_LEFT_STICK_LEFT">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_INPUT_UP">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_INPUT_RIGHT">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_INPUT_DOWN">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_INPUT_LEFT">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_RIGHT_STICK">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <!-- These binds don't do anything directly, but they allow the keys that
            emulate analog stick directional input to be rebound. -->

            <Action name="UI_SHORTCUT_RIGHT_STICK_UP">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_RIGHT_STICK_RIGHT">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_RIGHT_STICK_DOWN">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_RIGHT_STICK_LEFT">
                <Down>return false</Down>
            </Action>

            <Action name="UI_SHORTCUT_LEFT_SHOULDER">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_RIGHT_SHOULDER">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_LEFT_TRIGGER">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="UI_SHORTCUT_RIGHT_TRIGGER">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
        </Category>
    </Layer>
    <Layer name="SI_KEYBINDINGS_LAYER_SIEGE" allowFallthrough="false">
        <Category>
            <Action name="SIEGE_FIRE">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="SIEGE_RELEASE">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="SIEGE_PACK_UP">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="SIEGE_ESCAPE" inheritsBindFrom="TOGGLE_SYSTEM" hideAction="true">
                <Down>SiegeWeaponRelease()</Down>
            </Action>
            <AllowAction name="CAMERA_ZOOM_OUT"/>
            <AllowAction name="CAMERA_ZOOM_IN"/>
            <AllowAction name="TOGGLE_FULLSCREEN"/>
            <AllowAction name="TAKE_SCREENSHOT"/>
            <AllowAction name="START_CHAT_ENTER"/>
            <AllowAction name="START_CHAT_SLASH"/>
            <AllowAction name="CHAT_REPLY_TO_LAST_WHISPER"/>
            <AllowAction name="TOGGLE_HUD_UI"/>
            <AllowAction name="GAME_CAMERA_GAMEPAD_ZOOM"/>
            <AllowAction name="CLEAR_ACTIVE_NARRATION"/>
        </Category>
    </Layer>
    <Layer name="SI_KEYBINDINGS_LAYER_DIALOG" allowFallthrough="false">
        <Category>
            <Action name="DIALOG_PRIMARY">
                <Down>ZO_Dialogs_ButtonKeybindPressed(keybind)</Down>
            </Action>
            <Action name="DIALOG_SECONDARY">
                <Down>ZO_Dialogs_ButtonKeybindPressed(keybind)</Down>
            </Action>
            <Action name="DIALOG_TERTIARY">
                <Down>ZO_Dialogs_ButtonKeybindPressed(keybind)</Down>
            </Action>
            <Action name="DIALOG_NEGATIVE">
                <Down>ZO_Dialogs_ButtonKeybindPressed(keybind)</Down>
            </Action>
            <Action name="DIALOG_CLOSE">
                <Down>ZO_Dialogs_CloseKeybindPressed()</Down>
            </Action>
            <Action name="DIALOG_RESET">
                <Down>ZO_Dialogs_ButtonKeybindPressed(keybind)</Down>
            </Action>

            <AllowAction name="START_CHAT_ENTER"/>
            <AllowAction name="START_CHAT_SLASH"/>
            <AllowAction name="TAKE_SCREENSHOT"/>
            <AllowAction name="TOGGLE_FULLSCREEN"/>
            <AllowAction name="CLEAR_ACTIVE_NARRATION"/>
        </Category>
    </Layer>
    <Layer name="SI_KEYBINDINGS_LAYER_NOTIFICATIONS">
        <Category>
            <Action name="PLAYER_TO_PLAYER_INTERACT_ACCEPT">
                <Down>PLAYER_TO_PLAYER:Accept()</Down>
            </Action>

            <Action name="PLAYER_TO_PLAYER_INTERACT_DECLINE">
                <Down>PLAYER_TO_PLAYER:Decline()</Down>
            </Action>
        </Category>
    </Layer>

    <Layer name="SI_KEYBINDINGS_LAYER_UTILITY_WHEEL">
        <Category name="SI_KEYBINDINGS_CATEGORY_UTILITY_WHEEL_KEYBOARD">
            <Action name="UTILITY_WHEEL_KEYBOARD_CYCLE_LEFT">
                <Down>
                    if not IsInGamepadPreferredMode() then 
                        return INTERACTIVE_WHEEL_MANAGER:CycleLeft(ZO_INTERACTIVE_WHEEL_TYPE_UTILITY)
                    end
                    return false
                </Down>
            </Action>

            <Action name="UTILITY_WHEEL_KEYBOARD_CYCLE_RIGHT">
                <Down>
                    if not IsInGamepadPreferredMode() then 
                        return INTERACTIVE_WHEEL_MANAGER:CycleRight(ZO_INTERACTIVE_WHEEL_TYPE_UTILITY)
                    end
                    return false
                </Down>
            </Action>
        </Category>

        <Category name="SI_KEYBINDINGS_CATEGORY_UTILITY_WHEEL_GAMEPAD">
            <Action name="UTILITY_WHEEL_GAMEPAD_CYCLE_LEFT">
                <Down>
                    if IsInGamepadPreferredMode() then
                        return INTERACTIVE_WHEEL_MANAGER:CycleLeft(ZO_INTERACTIVE_WHEEL_TYPE_UTILITY)
                    end
                    return false
                </Down>
            </Action>

            <Action name="UTILITY_WHEEL_GAMEPAD_CYCLE_RIGHT">
                <Down>
                    if IsInGamepadPreferredMode() then
                        return INTERACTIVE_WHEEL_MANAGER:CycleRight(ZO_INTERACTIVE_WHEEL_TYPE_UTILITY)
                    end
                    return false
                </Down>
            </Action>
        </Category>
    </Layer>

    <Layer name="SI_KEYBINDINGS_LAYER_ACCESSIBLE_QUICKWHEEL" allowFallthrough="false">
        <Category>
            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_1">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(1)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(1)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_2">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(2)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(2)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_3">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(3)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(3)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_4">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(4)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(4)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_5">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(5)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(5)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_6">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(6)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(6)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_7">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(7)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(7)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_8">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(8)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(8)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_9">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(9)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(9)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HOTKEY_SLOT_10">
                <Down>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyDownAction(10)</Down>
                <Up>return INTERACTIVE_WHEEL_MANAGER:HandleHotkeyUpAction(10)</Up>
            </Action>

            <Action name="ACCESSIBLE_WHEEL_HIDE" hideAction="true" inheritsBindFrom="TOGGLE_GAME_CAMERA_UI_MODE" rebindable="false">
                <Down>return INTERACTIVE_WHEEL_MANAGER:CancelCurrentInteraction()</Down>
            </Action>

            <!-- Utility Wheel -->
            <AllowAction name="UTILITY_WHEEL_KEYBOARD_CYCLE_LEFT"/>
            <AllowAction name="UTILITY_WHEEL_KEYBOARD_CYCLE_RIGHT"/>
            <AllowAction name="UTILITY_WHEEL_GAMEPAD_CYCLE_LEFT"/>
            <AllowAction name="UTILITY_WHEEL_GAMEPAD_CYCLE_RIGHT"/>

            <!-- Chat -->
            <AllowAction name="START_CHAT_ENTER" />
            <AllowAction name="START_CHAT_SLASH" />
            <AllowAction name="CHAT_REPLY_TO_LAST_WHISPER" />
            
            <!-- Utility -->
            <AllowAction name="TAKE_SCREENSHOT" />
            <AllowAction name="TOGGLE_SYSTEM" />
            <AllowAction name="TOGGLE_GAMEPAD_MODE" />
            <AllowAction name="CLEAR_ACTIVE_NARRATION"/>

            <!-- Do not block movement related binds -->
            <AllowAction name="MOVE_FORWARD"/>
            <AllowAction name="MOVE_BACKWARD"/>
            <AllowAction name="TOGGLE_WALK"/>
            <AllowAction name="TURN_LEFT"/>
            <AllowAction name="TURN_RIGHT"/>
            <AllowAction name="MOVE_JUMPASCEND"/>
            <AllowAction name="AUTORUN"/>
            <AllowAction name="ROLL_DODGE"/>
            <AllowAction name="TOGGLE_MOUNT"/>
            <AllowAction name="GAMEPAD_JUMP_OR_INTERACT"/>
        </Category>
    </Layer>

    <!-- Not player facing -->
    <!-- Unlike other wheels, the player to player wheel does not use the interaction manager, so we need a different keybind layer for the accessible hotkeys -->
    <Layer name="PlayerToPlayerAccessibleLayer" allowFallthrough="false">
        <Category>
            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_1" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_1">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(1)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(1)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_2" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_2">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(2)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(2)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_3" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_3">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(3)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(3)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_4" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_4">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(4)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(4)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_5" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_5">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(5)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(5)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_6" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_6">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(6)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(6)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_7" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_7">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(7)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(7)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_8" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_8">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(8)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(8)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_9" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_9">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(9)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(9)</Up>
            </Action>

            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HOTKEY_SLOT_10" hideAction="true" inheritsBindFrom="ACCESSIBLE_WHEEL_HOTKEY_SLOT_10">
                <Down>return PLAYER_TO_PLAYER:HandleHotkeyDownAction(10)</Down>
                <Up>return PLAYER_TO_PLAYER:HandleHotkeyUpAction(10)</Up>
            </Action>
            
            <Action name="PLAYER_TO_PLAYER_ACCESSIBLE_WHEEL_HIDE" hideAction="true" inheritsBindFrom="TOGGLE_GAME_CAMERA_UI_MODE">
                <Down>
                    local CLEAR_SELECTION = true
                    PLAYER_TO_PLAYER:StopInteraction(CLEAR_SELECTION)
                </Down>
            </Action>

            <!-- Chat -->
            <AllowAction name="START_CHAT_ENTER" />
            <AllowAction name="START_CHAT_SLASH" />
            <AllowAction name="CHAT_REPLY_TO_LAST_WHISPER" />

            <!-- Utility -->
            <AllowAction name="TAKE_SCREENSHOT" />
            <AllowAction name="TOGGLE_SYSTEM" />
            <AllowAction name="TOGGLE_GAMEPAD_MODE" />
            <AllowAction name="CLEAR_ACTIVE_NARRATION"/>

            <!-- Do not block movement related binds -->
            <AllowAction name="MOVE_FORWARD"/>
            <AllowAction name="MOVE_BACKWARD"/>
            <AllowAction name="TOGGLE_WALK"/>
            <AllowAction name="TURN_LEFT"/>
            <AllowAction name="TURN_RIGHT"/>
            <AllowAction name="MOVE_JUMPASCEND"/>
            <AllowAction name="AUTORUN"/>
            <AllowAction name="ROLL_DODGE"/>
            <AllowAction name="TOGGLE_MOUNT"/>
            <AllowAction name="GAMEPAD_JUMP_OR_INTERACT"/>
        </Category>
    </Layer>
    
    <Layer name="SI_KEYBINDINGS_LAYER_INSTANCE_KICK_WARNING">
        <Category>
            <Action name="INSTANCE_KICK_LEAVE_INSTANCE">
                <Down>ExitInstanceImmediately()</Down>
            </Action>
        </Category>
    </Layer>
    <!-- This layer should not be player facing, it "magically" makes the mouse buttons work differently in UI mode-->
    <Layer name="MouseUIMode">
        <Category>
            <Action name="LEFT_MOUSE_IN_WORLD" hideAction="true" rebindable="false">
                <Down>LeftMouseDownInWorld()</Down>
                <Up>LeftMouseUpInWorld()</Up>
            </Action>

            <Action name="LEFT_AND_RIGHT_MOUSE_IN_WORLD" hideAction="true" rebindable="false">
                <Down>LeftAndRightMouseDownInWorld()</Down>
                <Up>LeftAndRightMouseUpInWorld()</Up>
            </Action>

            <Action name="RIGHT_MOUSE_IN_WORLD" hideAction="true" rebindable="false">
                <Down>RightMouseDownInWorld()</Down>
                <Up>RightMouseUpInWorld()</Up>
            </Action>
        </Category>
    </Layer>

    <!-- Not player facing -->
    <Layer name="UIError">
        <Category>
            <Action name="UI_ERROR_DISMISS" hideAction="true" inheritsBindFrom="UI_SHORTCUT_PRIMARY">
                <Down>return ZO_UIErrors_Dismiss()</Down>
            </Action>
            <Action name="UI_ERROR_RELOAD_UI" hideAction="true" inheritsBindFrom="UI_SHORTCUT_SECONDARY">
                <Down>ReloadUI()</Down>
            </Action>
            <Action name="UI_ERROR_SUPPRESS" hideAction="true" inheritsBindFrom="UI_SHORTCUT_TERTIARY">
                <Down>return ZO_UIErrors_Suppress()</Down>
            </Action>
            <Action name="UI_ERROR_COPY" hideAction="true" inheritsBindFrom="UI_SHORTCUT_QUATERNARY">
                <Down>return ZO_UIErrors_CopyError()</Down>
            </Action>
            <Action name="UI_ERROR_MORE_INFO" hideAction="true" inheritsBindFrom="UI_SHORTCUT_QUINARY">
                <Down>
                    if IsInGamepadPreferredMode() then
                        return ZO_UIErrors_ToggleMoreInfo()
                    else
                        return false
                    end
                </Down>
            </Action>
            <Action name="UI_ERROR_PAGE_LEFT" hideAction="true" inheritsBindFrom="UI_SHORTCUT_LEFT_TRIGGER">
                <Down>
                    if IsInGamepadPreferredMode() then
                        return ZO_UIErrors_PageLeft()
                    else
                        return false
                    end
                </Down>
            </Action>
            <Action name="UI_ERROR_PAGE_RIGHT" hideAction="true" inheritsBindFrom="UI_SHORTCUT_RIGHT_TRIGGER">
                <Down>
                    if IsInGamepadPreferredMode() then
                        return ZO_UIErrors_PageRight()
                    else
                        return false
                    end
                </Down>
            </Action>
        </Category>
    </Layer>
    
    <!-- Not player facing -->
    <Layer name="Conversation">
        <Category>
            <Action name="CONVERSATION_OPTION_1" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(1)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_2" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(2)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_3" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(3)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_4" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(4)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_5" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(5)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_6" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(6)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_7" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(7)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_8" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(8)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_9" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(9)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_10" hideAction="true" rebindable="false">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(10)</Down>
            </Action>

            <Action name="CONVERSATION_OPTION_PRIMARY" hideAction="true" rebindable="false" inheritsBindFrom="UI_SHORTCUT_PRIMARY">
                <Down>INTERACT_WINDOW:SelectChatterOptionByIndex(1)</Down>
            </Action>
            <Action name="CONVERSATION_OPTION_NEGATIVE" hideAction="true" rebindable="false" inheritsBindFrom="UI_SHORTCUT_NEGATIVE">
                <Down>INTERACT_WINDOW:SelectLastChatterOption()</Down>
            </Action>
        </Category>
    </Layer>
    <Layer name="SceneChangeInterceptLayer">
        <Category>
            <!-- Intercept menu keybinds when the player is under arrest -->
            <Action name="INTERCEPT_UI_SHORTCUT_EXIT" hideAction="true" rebindable="false" inheritsBindFrom="UI_SHORTCUT_EXIT">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_UI_SHORTCUT_NEGATIVE" hideAction="true" rebindable="false" inheritsBindFrom="UI_SHORTCUT_NEGATIVE">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_SYSTEM" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_SYSTEM">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_GAME_CAMERA_UI_MODE" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_GAME_CAMERA_UI_MODE">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_MARKET" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_MARKET">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_INVENTORY" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_INVENTORY">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_CHARACTER" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_CHARACTER">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_SKILLS" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_SKILLS">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_CHAMPION" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_CHAMPION">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_JOURNAL" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_JOURNAL">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_COLLECTIONS_BOOK" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_COLLECTIONS_BOOK">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_MAP" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_MAP">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_GROUP" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_GROUP">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_CONTACTS" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_CONTACTS">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_GUILDS" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_GUILDS">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_ALLIANCE_WAR" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_ALLIANCE_WAR">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_MAIL" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_MAIL">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_NOTIFICATIONS" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_NOTIFICATIONS">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_ACTIVITY_FINDER" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_ACTIVITY_FINDER">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_CROWN_CRATES" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_CROWN_CRATES">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_HELP" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_HELP">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_TOGGLE_ENDLESS_DUNGEON_BUFF_TRACKER" hideAction="true" rebindable="false" inheritsBindFrom="TOGGLE_ENDLESS_DUNGEON_BUFF_TRACKER">
                <Down>return true</Down>
            </Action>
        </Category>
    </Layer>
    <Layer name="PreviewInterceptLayer">
        <Category>
            <!-- Intercept keybinds for actions that can cause previewing to break -->
            <Action name="INTERCEPT_SHEATHE_WEAPON_TOGGLE" hideAction="true" rebindable="false" inheritsBindFrom="SHEATHE_WEAPON_TOGGLE">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_AUTORUN" hideAction="true" rebindable="false" inheritsBindFrom="AUTORUN">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_SPECIAL_MOVE_CROUCH" hideAction="true" rebindable="false" inheritsBindFrom="SPECIAL_MOVE_CROUCH">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_SPECIAL_WEAPON_SWAP" hideAction="true" rebindable="false" inheritsBindFrom="SPECIAL_MOVE_WEAPON_SWAP">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_SPECIAL_WEAPON_SWAP_TO_SET_1" hideAction="true" rebindable="false" inheritsBindFrom="SPECIAL_MOVE_WEAPON_SWAP_TO_SET_1">
                <Down>return true</Down>
            </Action>

            <Action name="INTERCEPT_SPECIAL_WEAPON_SWAP_TO_SET_2" hideAction="true" rebindable="false" inheritsBindFrom="SPECIAL_MOVE_WEAPON_SWAP_TO_SET_2">
                <Down>return true</Down>
            </Action>
        </Category>
    </Layer>
    <!-- Not player facing -->
    <Layer name="Guild">
        <Category>
            <Action name="GUILD_1" hideAction="true" rebindable="false">
                <Down>GUILD_SELECTOR:SelectGuildByIndex(1)</Down>
            </Action>
            <Action name="GUILD_2" hideAction="true" rebindable="false">
                <Down>GUILD_SELECTOR:SelectGuildByIndex(2)</Down>
            </Action>
            <Action name="GUILD_3" hideAction="true" rebindable="false">
                <Down>GUILD_SELECTOR:SelectGuildByIndex(3)</Down>
            </Action>
            <Action name="GUILD_4" hideAction="true" rebindable="false">
                <Down>GUILD_SELECTOR:SelectGuildByIndex(4)</Down>
            </Action>
            <Action name="GUILD_5" hideAction="true" rebindable="false">
                <Down>GUILD_SELECTOR:SelectGuildByIndex(5)</Down>
            </Action>
        </Category>
    </Layer>
    <!-- Not player facing -->
    <Layer name="SetGuildRankDialog">
        <Category>
            <Action name="SET_GUILD_RANK_1" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(1)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_2" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(2)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_3" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(3)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_4" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(4)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_5" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(5)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_6" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(6)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_7" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(7)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_8" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(8)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_9" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(9)</Down>
            </Action>
            <Action name="SET_GUILD_RANK_10" hideAction="true" rebindable="false">
                <Down>GUILD_ROSTER_KEYBOARD:SetRankDialogRank(10)</Down>
            </Action>
        </Category>
    </Layer>

    <!-- Not player facing -->
    <Layer name="RadialMenu">
        <Category>
            <BlockAction name="SPECIAL_MOVE_ATTACK" />
            <BlockAction name="SPECIAL_MOVE_BLOCK" />
            <BlockAction name="SPECIAL_MOVE_INTERRUPT" />
        </Category>
    </Layer>
    
    <!-- Not player facing -->
    <Layer name="Death">
        <Category>
            <Action name="DEATH_PRIMARY" hideAction="true" inheritsBindFrom="DIALOG_PRIMARY" rebindable="false">
                <Down>DEATH:SelectOption(keybind)</Down>
            </Action>
            <Action name="DEATH_SECONDARY" hideAction="true" inheritsBindFrom="DIALOG_SECONDARY" rebindable="false">
                <Down>DEATH:SelectOption(keybind)</Down>
            </Action>
            <Action name="DEATH_TERTIARY" hideAction="true" inheritsBindFrom="UI_SHORTCUT_TERTIARY" rebindable="false">
                <Down>DEATH:SelectOption(keybind)</Down>
            </Action>
            <Action name="DEATH_DECLINE" hideAction="true" inheritsBindFrom="PLAYER_TO_PLAYER_INTERACT_DECLINE" rebindable="false">
                <Down>DEATH:SelectOption(keybind)</Down>
            </Action>
            <Action name="DEATH_RECAP_TOGGLE" hideAction="true" inheritsBindFrom="ASSIST_NEXT_TRACKED_QUEST" rebindable="false">
                <Down>DEATH_RECAP_TOGGLE:Toggle()</Down>
            </Action>
            <Action name="DEATH_RECAP_HIDE" hideAction="true" inheritsBindFrom="TOGGLE_GAME_CAMERA_UI_MODE" rebindable="false">
                <Down>return DEATH_RECAP_TOGGLE:Hide()</Down>
            </Action>
        </Category>
    </Layer>

    <!-- Not player facing -->
    <Layer name="Loot">
        <Category>
            <Action name="LOOT_ITEM" hideAction="true" inheritsBindFrom="UI_SHORTCUT_PRIMARY">
                <Down>ZO_Loot_ButtonKeybindPressed(keybind)</Down>
            </Action>
            <Action name="LOOT_ALL" hideAction="true" inheritsBindFrom="UI_SHORTCUT_SECONDARY">
                <Down>ZO_Loot_ButtonKeybindPressed(keybind)</Down>
            </Action>
            <Action name="LOOT_EXIT" hideAction="true" inheritsBindFrom="UI_SHORTCUT_EXIT">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
        </Category>
    </Layer>
    <!-- Not player facing -->
    <Layer name="GamepadChatSystem" allowFallthrough="false">
        <Category>
            <Action name="SUBMIT_CHAT" hideAction="true" inheritsBindFrom="UI_SHORTCUT_PRIMARY">
                <Down>ZO_ChatSystem_SubmitChat()</Down>
            </Action>
            <Action name="CANCEL_CHAT" hideAction="true" inheritsBindFrom="UI_SHORTCUT_NEGATIVE">
                <Down>ZO_ChatSystem_CancelChat()</Down>
            </Action>
            <Action name="EXIT_CHAT" hideAction="true" inheritsBindFrom="UI_SHORTCUT_EXIT">
                <Down>ZO_ChatSystem_ExitChat()</Down>
            </Action>
            <AllowAction name="START_CHAT_ENTER"/>
        </Category>
    </Layer>
    <!-- Not player facing -->
    <Layer name="GameMenu">
        <Category>
            <Action name="GAME_MENU_DO_NOTHING" hideAction="true" inheritsBindFrom="UI_SHORTCUT_EXIT">
                <Down> do end </Down>
            </Action>
        </Category>
    </Layer>
    <!-- Not player facing -->
    <Layer name="KeybindWindow">
        <Category>
            <Action name="KEYBINDS_LOAD_KEYBOARD_DEFAULTS" hideAction="true" inheritsBindFrom="UI_SHORTCUT_SECONDARY">
                <Down> ZO_Dialogs_ShowDialog("KEYBINDINGS_RESET_KEYBOARD_TO_DEFAULTS") </Down>
            </Action>
            <Action name="KEYBINDS_LOAD_GAMEPAD_DEFAULTS" hideAction="true" inheritsBindFrom="UI_SHORTCUT_TERTIARY">
                <Down> ZO_Dialogs_ShowDialog("KEYBINDINGS_RESET_GAMEPAD_TO_DEFAULTS") </Down>
            </Action>
        </Category>
    </Layer>
    <!-- Not player facing -->
    <Layer name="Addons">
        <Category>
            <Action name="ADDONS_PANEL_PRIMARY" hideAction="true" inheritsBindFrom="DIALOG_PRIMARY">
                <Down>ZO_AddOnManagerPrimaryButton_Callback()</Down>
            </Action>
            <Action name="ADDONS_PANEL_SECONDARY" hideAction="true" inheritsBindFrom="DIALOG_SECONDARY">
                <Down>ZO_AddOnManagerSecondaryButton_Callback()</Down>
            </Action>
        </Category>
    </Layer>
    <!-- Not player facing -->
    <Layer name="OptionsWindow">
        <Category>
            <Action name="OPTIONS_APPLY_CHANGES" hideAction="true" inheritsBindFrom="DIALOG_PRIMARY">
                <Down>KEYBOARD_OPTIONS:ApplySettings()</Down>
            </Action>
            <Action name="OPTIONS_LOAD_DEFAULTS" hideAction="true" inheritsBindFrom="DIALOG_RESET">
                <Down>ZO_Dialogs_ShowDialog("OPTIONS_RESET_TO_DEFAULTS")</Down>
            </Action>
        </Category>
    </Layer>
    <!-- Not player facing-->
    <Layer name="ScreenAdjustActions">
        <Category>
            <Action name="SCREEN_ADJUST_GROW" hideAction="true">
                <Down>ZO_ScreenAdjust_AddToGrowthRate(1)</Down>
                <Up>ZO_ScreenAdjust_AddToGrowthRate(-1)</Up>
            </Action>
            <Action name="SCREEN_ADJUST_SHRINK" hideAction="true">
                <Down>ZO_ScreenAdjust_AddToGrowthRate(-1)</Down>
                <Up>ZO_ScreenAdjust_AddToGrowthRate(1)</Up>
            </Action>
            <Action name="SCREEN_ADJUST_SAVE" hideAction="true" inheritsBindFrom="UI_SHORTCUT_PRIMARY">
                <Down>ZO_ScreenAdjust_Handle_OnSave()</Down>
            </Action>
            <Action name="SCREEN_ADJUST_CANCEL" hideAction="true" inheritsBindFrom="UI_SHORTCUT_NEGATIVE">
                <Down>ZO_ScreenAdjust_Handle_OnCancel()</Down>
            </Action>
        </Category>
    </Layer>

    <Layer name="SI_KEYBINDINGS_LAYER_HUD_HOUSING">
        <Category>
            <Action name="SHOW_HOUSING_PANEL">
                <Down>HOUSING_HUD_FRAGMENT:OnHousingHUDButtonPressed()</Down>
            </Action>
        </Category>
    </Layer>

    <!-- These binds don't do anything. They exist to provide all of the actions used by the BG Hud and BG Scoreboard. The specific layers for those
         screens inherit the key from these, but define their own down and up callbacks. -->
    <Layer name="SI_KEYBINDINGS_LAYER_BATTLEGROUNDS">
        <Category>
            <Action name="TOGGLE_BATTLEGROUND_SCOREBOARD_DUMMY">
                <Down>return false</Down>
            </Action>
            <Action name="LEAVE_BATTLEGROUND_DUMMY">
                <Down>return false</Down>
            </Action>
            <Action name="BATTLEGROUND_SCOREBOARD_PREVIOUS_DUMMY">
                <Down>return false</Down>
            </Action>
            <Action name="BATTLEGROUND_SCOREBOARD_NEXT_DUMMY">
                <Down>return false</Down>
            </Action>
            <Action name="BATTLEGROUND_SCOREBOARD_PLAYER_OPTIONS_DUMMY">
                <Down>return false</Down>
            </Action>
        </Category>
    </Layer>

    <!-- The actions in this layer must inherit from an action in SI_KEYBINDINGS_LAYER_BATTLEGROUNDS. This layer is not shown in the keybind window.-->
    <Layer name="BattlegroundHud">
        <Category>
            <Action name="SHOW_BATTLEGROUND_SCOREBOARD" inheritsBindFrom="TOGGLE_BATTLEGROUND_SCOREBOARD_DUMMY" hideAction="true">
                <Down>BATTLEGROUND_SCOREBOARD_FRAGMENT:OnHUDButtonPressedDown()</Down>
            </Action>
        </Category>
    </Layer>

    <!-- The actions in this layer must inherit from an action in SI_KEYBINDINGS_LAYER_BATTLEGROUNDS. This layer is not shown in the keybind window.-->
    <Layer name="BattlegroundScoreboard">
        <Category>
            <Action name="LEAVE_BATTLEGROUND" inheritsBindFrom="LEAVE_BATTLEGROUND_DUMMY" hideAction="true">
                <Down>
                    return BATTLEGROUND_SCOREBOARD_END_OF_GAME:OnKeybindDown(keybind) or ZO_KeybindStrip_HandleKeybindDown(keybind)
                </Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="HIDE_BATTLEGROUND_SCOREBOARD" inheritsBindFrom="TOGGLE_BATTLEGROUND_SCOREBOARD_DUMMY" hideAction="true">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="BATTLEGROUND_SCOREBOARD_PREVIOUS" inheritsBindFrom="BATTLEGROUND_SCOREBOARD_PREVIOUS_DUMMY" hideAction="true">
                <Down>
                    return BATTLEGROUND_SCOREBOARD_END_OF_GAME:OnKeybindDown(keybind) or ZO_KeybindStrip_HandleKeybindDown(keybind)
                </Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="BATTLEGROUND_SCOREBOARD_NEXT" inheritsBindFrom="BATTLEGROUND_SCOREBOARD_NEXT_DUMMY" hideAction="true">
                <Down>
                    return BATTLEGROUND_SCOREBOARD_END_OF_GAME:OnKeybindDown(keybind) or ZO_KeybindStrip_HandleKeybindDown(keybind)
                </Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
            <Action name="BATTLEGROUND_SCOREBOARD_PLAYER_OPTIONS" inheritsBindFrom="BATTLEGROUND_SCOREBOARD_PLAYER_OPTIONS_DUMMY" hideAction="true">
                <Down>
                    return BATTLEGROUND_SCOREBOARD_END_OF_GAME:OnKeybindDown(keybind) or ZO_KeybindStrip_HandleKeybindDown(keybind)
                </Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
        </Category>
    </Layer>

    <Layer name="ScreenshotMode" allowFallthrough="false">
        <Category>
            <AllowAction name="GAMEPAD_JUMP_OR_INTERACT" />
            <AllowAction name="GAME_CAMERA_GAMEPAD_ZOOM" />

            <!-- Keyboard specific -->
            <AllowAction name="MOVE_JUMPASCEND" />
            <AllowAction name="CAMERA_ZOOM_IN" />
            <AllowAction name="CAMERA_ZOOM_OUT" />
            <AllowAction name="MOVE_FORWARD" />
            <AllowAction name="MOVE_BACKWARD" />
            <AllowAction name="TURN_LEFT" />
            <AllowAction name="TURN_RIGHT" />
            <AllowAction name="TAKE_SCREENSHOT" />
            <AllowAction name="CLEAR_ACTIVE_NARRATION"/>

            <Action name="SCREENSHOT_MODE_EXIT" hideAction="true" rebindable="false">
                <Down>
                    SCREENSHOT_MODE_GAMEPAD:ExitKeybind()
                </Down>
            </Action>
            <!-- These two binds are meant to cover what a player might mash to try to get out of this mode.-->
            <Action name="SCREENSHOT_MODE_SHOW_UI_1" hideAction="true" rebindable="false">
                <Down>
                    SCREENSHOT_MODE_GAMEPAD:ShowUIKeybind()
                </Down>
            </Action>
            <Action name="SCREENSHOT_MODE_SHOW_UI_2" hideAction="true" rebindable="false">
                <Down>
                    SCREENSHOT_MODE_GAMEPAD:ShowUIKeybind()
                </Down>
            </Action>
            <Action name="SCREENSHOT_MODE_TOGGLE_NAMEPLATES" hideAction="true" rebindable="false">
                <Down>
                    SCREENSHOT_MODE_GAMEPAD:ToggleNameplatesKeybind()
                </Down>
            </Action>
        </Category>
    </Layer>

    <Layer name="SI_KEYBINDINGS_LAYER_HOUSING_EDITOR" allowFallthrough="false">
        <Category>
            <!--Movement-->
            <AllowAction name="MOVE_FORWARD" />
            <AllowAction name="MOVE_BACKWARD" />
            <AllowAction name="TOGGLE_WALK" />
            <AllowAction name="TURN_LEFT" />
            <AllowAction name="TURN_RIGHT" />
            <AllowAction name="MOVE_JUMPASCEND" />
            <AllowAction name="AUTORUN" />
            <AllowAction name="GAMEPAD_JUMP_OR_INTERACT" />
            <AllowAction name="SPECIAL_MOVE_SPRINT" />
            <AllowAction name="GAMEPAD_SPECIAL_MOVE_SPRINT" />
            <AllowAction name="SPECIAL_MOVE_CROUCH" />
            <AllowAction name="GAMEPAD_MOVE_JUMPASCEND" />

            <!--Camera-->
            <AllowAction name="CAMERA_ZOOM_OUT" />
            <AllowAction name="CAMERA_ZOOM_IN" />
            <AllowAction name="GAME_CAMERA_MOUSE_FREE_LOOK" />
            <AllowAction name="GAME_CAMERA_GAMEPAD_ZOOM" />
            <AllowAction name="TOGGLE_FIRST_PERSON" />

            <!--Chat-->
            <AllowAction name="START_CHAT_ENTER" />
            <AllowAction name="START_CHAT_SLASH" />
            <AllowAction name="CHAT_REPLY_TO_LAST_WHISPER" />

            <!--Utility-->
            <AllowAction name="TAKE_SCREENSHOT" />
            <AllowAction name="TOGGLE_FULLSCREEN" />
            <AllowAction name="TOGGLE_SHOW_INGAME_GUI" />
            <AllowAction name="TOGGLE_GAME_CAMERA_UI_MODE" />
            <AllowAction name="TOGGLE_SYSTEM" />
            <AllowAction name="TOGGLE_HUD_UI" />
            <AllowAction name="TOGGLE_GAMEPAD_MODE" />
            <AllowAction name="TOGGLE_HELP" />
            <AllowAction name="CLEAR_ACTIVE_NARRATION" />

            <Action name="HOUSING_EDITOR_PRIMARY_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_NEGATIVE_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_SECONDARY_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_TERTIARY_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_QUATERNARY_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_QUINARY_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_SENARY_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

			<Action name="HOUSING_EDITOR_CYCLE_TARGET_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
			</Action>

            <Action name="HOUSING_EDITOR_TOGGLE_NODE_SPEED">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_TOGGLE_NODE_DELAY">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_JUMP_TO_SAFE_LOC">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="DISABLE_HOUSING_EDITOR" inheritsBindFrom="SHOW_HOUSING_PANEL" hideAction="true">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_UNDO_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_REDO_ACTION">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_BEGIN_FURNITURE_LINKING">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
        </Category>
    </Layer>

    <Layer name="SI_KEYBINDINGS_LAYER_HOUSING_EDITOR_PLACEMENT_MODE" allowFallthrough="true">
        <Category>
            <!-- These actions chord with D-Pad button in gamepad. Disable them to prevent waiting on chord resolution.-->
            <BlockAction name="GAME_CAMERA_GAMEPAD_ZOOM"/>
            <BlockAction name="DISABLE_HOUSING_EDITOR"/>

            <Action name="HOUSING_EDITOR_YAW_LEFT">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_YAW_RIGHT">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_PITCH_FORWARD">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_PITCH_BACKWARD">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_ROLL_LEFT">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_ROLL_RIGHT">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_PUSH_FORWARD">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_PULL_BACKWARD">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>

            <Action name="HOUSING_EDITOR_ALIGN_TO_SURFACE">
                <Down>return ZO_KeybindStrip_HandleKeybindDown(keybind)</Down>
                <Up>return ZO_KeybindStrip_HandleKeybindUp(keybind)</Up>
            </Action>
        </Category>
    </Layer>

    <Layer name="SpecialToggleHelp">
        <Category>
            <!-- keyboard uses TOGGLE_HELP -->
            <Action name="GAMEPAD_SPECIAL_TOGGLE_HELP">
                <Down> HELP_MANAGER:ToggleHelp() </Down>
            </Action>
        </Category>
    </Layer>

    <Layer name="ScryingActions">
        <Category>
            <BlockAction name="SPECIAL_MOVE_CROUCH"/>
            <BlockAction name="SPECIAL_MOVE_ATTACK"/>
            <BlockAction name="SPECIAL_MOVE_BLOCK"/>
            <BlockAction name="TOGGLE_FIRST_PERSON"/>
            <BlockAction name="GAME_CAMERA_GAMEPAD_ZOOM"/>
        </Category>
    </Layer>

    <Layer name="AntiquityDiggingActions">
        <Category>
            <Action name="ANTIQUITY_DIGGING_MORE_INFO">
                <Down> return ANTIQUITY_DIGGING:ToggleShowMoreInfoTooltip() </Down>
            </Action>
        </Category>
    </Layer>

    <!-- Special scenario where crouch button is not being used, but shown as disabled, so we have to pretend it is disabled.-->
    <Layer name="PathNodeRotationBlockCrouchLayer">
        <Category>
            <BlockAction name="SPECIAL_MOVE_CROUCH"/>
        </Category>
    </Layer>

    <!-- Not player facing -->
    <Layer name="CloseActionsInterceptLayer">
        <Category>
            <Action name="CLOSE_INTERCEPT_TOGGLE_SYSTEM" hideAction="true" inheritsBindFrom="TOGGLE_SYSTEM" rebindable="false">
                <Down>return CLOSE_ACTIONS_INTERCEPT_LAYER_FRAGMENT:InterceptCloseAction(keybind)</Down>
            </Action>
            <Action name="CLOSE_INTERCEPT_TOGGLE_GAME_CAMERA_UI_MODE" hideAction="true" inheritsBindFrom="TOGGLE_GAME_CAMERA_UI_MODE" rebindable="false">
                <Down>return CLOSE_ACTIONS_INTERCEPT_LAYER_FRAGMENT:InterceptCloseAction(keybind)</Down>
            </Action>
            <Action name="CLOSE_INTERCEPT_GAMEPAD_UI_EXIT" hideAction="true" inheritsBindFrom="GAMEPAD_UI_EXIT" rebindable="false">
                <Down>return CLOSE_ACTIONS_INTERCEPT_LAYER_FRAGMENT:InterceptCloseAction(keybind)</Down>
            </Action>
        </Category>
    </Layer>
</Bindings>
